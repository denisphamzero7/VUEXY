<script setup>
import laptopGirl from '@images/illustrations/laptop-girl.png'

const isCurrentPasswordVisible = ref(false)
const isNewPasswordVisible = ref(false)
const isConfirmPasswordVisible = ref(false)
const currentPassword = ref('')
const newPassword = ref('')
const confirmPassword = ref('')

const passwordRequirements = [
  'T·ªëi thi·ªÉu 8 k√Ω t·ª± - c√†ng d√†i c√†ng t·ªët',
  '√çt nh·∫•t m·ªôt k√Ω t·ª± th∆∞·ªùng',
  '√çt nh·∫•t m·ªôt ch·ªØ s·ªë, k√Ω t·ª± ƒë·∫∑c bi·ªát ho·∫∑c kho·∫£ng tr·∫Øng',
]

const serverKeys = [
  {
    name: 'Server Key 1',
    key: '23eaf7f0-f4f7-495e-8b86-fad3261282ac',
    createdOn: '28 Apr 2021, 18:20 GTM+4:10',
    permission: 'To√†n quy·ªÅn',
  },
  {
    name: 'Server Key 2',
    key: 'bb98e571-a2e2-4de8-90a9-2e231b5e99',
    createdOn: '12 Feb 2021, 10:30 GTM+2:30',
    permission: 'Ch·ªâ ƒë·ªçc',
  },
  {
    name: 'Server Key 3',
    key: '2e915e59-3105-47f2-8838-6e46bf83b711',
    createdOn: '28 Dec 2020, 12:21 GTM+4:10',
    permission: 'To√†n quy·ªÅn',
  },
]

const recentDevicesHeaders = [
  {
    title: 'TR√åNH DUY·ªÜT',
    key: 'browser',
  },
  {
    title: 'THI·∫æT B·ªä',
    key: 'device',
  },
  {
    title: 'V·ªä TR√ç',
    key: 'location',
  },
  {
    title: 'HO·∫†T ƒê·ªòNG G·∫¶N ƒê√ÇY',
    key: 'recentActivity',
  },
]

const recentDevices = [
  {
    browser: 'Chrome tr√™n Windows',
    device: 'HP Spectre 360',
    location: 'New York, NY',
    recentActivity: '28 Apr 2022, 18:20',
    deviceIcon: {
      icon: 'tabler-brand-windows',
      color: 'primary',
    },
  },
  {
    browser: 'Chrome tr√™n iPhone',
    device: 'iPhone 12x',
    location: 'Los Angeles, CA',
    recentActivity: '20 Apr 2022, 10:20',
    deviceIcon: {
      icon: 'tabler-device-mobile',
      color: 'error',
    },
  },
  {
    browser: 'Chrome tr√™n Android',
    device: 'Oneplus 9 Pro',
    location: 'San Francisco, CA',
    recentActivity: '16 Apr 2022, 04:20',
    deviceIcon: {
      icon: 'tabler-brand-android',
      color: 'success',
    },
  },
  {
    browser: 'Chrome tr√™n macOS',
    device: 'Apple iMac',
    location: 'New York, NY',
    recentActivity: '28 Apr 2022, 18:20',
    deviceIcon: {
      icon: 'tabler-brand-apple',
      color: 'secondary',
    },
  },
  {
    browser: 'Chrome tr√™n Windows',
    device: 'HP Spectre 360',
    location: 'Los Angeles, CA',
    recentActivity: '20 Apr 2022, 10:20',
    deviceIcon: {
      icon: 'tabler-brand-windows',
      color: 'primary',
    },
  },
  {
    browser: 'Chrome tr√™n Android',
    device: 'Oneplus 9 Pro',
    location: 'San Francisco, CA',
    recentActivity: '16 Apr 2022, 04:20',
    deviceIcon: {
      icon: 'tabler-brand-android',
      color: 'success',
    },
  },
]

const isOneTimePasswordDialogVisible = ref(false)
</script>

<template>
  <VRow>
    <!-- SECTION: Change Password -->
    <VCol cols="12">
      <VCard title="ƒê·ªïi m·∫≠t kh·∫©u">
        <VForm>
          <VCardText class="pt-0">
            <!-- üëâ Current Password -->
            <VRow>
              <VCol
                cols="12"
                md="6"
              >
                <!-- üëâ current password -->
                <AppTextField
                  v-model="currentPassword"
                  :type="isCurrentPasswordVisible ? 'text' : 'password'"
                  :append-inner-icon="isCurrentPasswordVisible ? 'tabler-eye-off' : 'tabler-eye'"
                  label="M·∫≠t kh·∫©u hi·ªán t·∫°i"
                  autocomplete="on"
                  placeholder="¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑"
                  @click:append-inner="isCurrentPasswordVisible = !isCurrentPasswordVisible"
                />
              </VCol>
            </VRow>

            <!-- üëâ New Password -->
            <VRow>
              <VCol
                cols="12"
                md="6"
              >
                <!-- üëâ new password -->
                <AppTextField
                  v-model="newPassword"
                  :type="isNewPasswordVisible ? 'text' : 'password'"
                  :append-inner-icon="isNewPasswordVisible ? 'tabler-eye-off' : 'tabler-eye'"
                  label="M·∫≠t kh·∫©u m·ªõi"
                  autocomplete="on"
                  placeholder="¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑"
                  @click:append-inner="isNewPasswordVisible = !isNewPasswordVisible"
                />
              </VCol>

              <VCol
                cols="12"
                md="6"
              >
                <!-- üëâ confirm password -->
                <AppTextField
                  v-model="confirmPassword"
                  :type="isConfirmPasswordVisible ? 'text' : 'password'"
                  :append-inner-icon="isConfirmPasswordVisible ? 'tabler-eye-off' : 'tabler-eye'"
                  label="X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi"
                  autocomplete="on"
                  placeholder="¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑¬∑"
                  @click:append-inner="isConfirmPasswordVisible = !isConfirmPasswordVisible"
                />
              </VCol>
            </VRow>
          </VCardText>

          <!-- üëâ Password Requirements -->
          <VCardText>
            <h6 class="text-h6 text-medium-emphasis mb-4">
              Y√™u c·∫ßu m·∫≠t kh·∫©u:
            </h6>

            <VList class="card-list">
              <VListItem
                v-for="item in passwordRequirements"
                :key="item"
                :title="item"
                class="text-medium-emphasis"
              >
                <template #prepend>
                  <VIcon
                    size="10"
                    icon="tabler-circle-filled"
                  />
                </template>
              </VListItem>
            </VList>
          </VCardText>

          <!-- üëâ Action Buttons -->
          <VCardText class="d-flex flex-wrap gap-4">
            <VBtn>L∆∞u thay ƒë·ªïi</VBtn>

            <VBtn
              type="reset"
              color="secondary"
              variant="tonal"
            >
              ƒê·∫∑t l·∫°i
            </VBtn>
          </VCardText>
        </VForm>
      </VCard>
    </VCol>
    <!-- !SECTION -->

    <!-- SECTION Two-steps verification -->
    <VCol cols="12">
      <VCard title="X√°c th·ª±c hai b∆∞·ªõc">
        <VCardText>
          <h5 class="text-h5 text-medium-emphasis mb-4">
            X√°c th·ª±c hai y·∫øu t·ªë ch∆∞a ƒë∆∞·ª£c b·∫≠t.
          </h5>
          <p class="mb-6">
            X√°c th·ª±c hai y·∫øu t·ªë th√™m m·ªôt l·ªõp b·∫£o m·∫≠t cho t√†i kho·∫£n c·ªßa b·∫°n b·∫±ng c√°ch y√™u c·∫ßu nhi·ªÅu h∆°n ch·ªâ m·∫≠t kh·∫©u khi ƒëƒÉng nh·∫≠p.
            <a
              href="javascript:void(0)"
              class="text-decoration-none"
            >T√¨m hi·ªÉu th√™m.</a>
          </p>

          <VBtn @click="isOneTimePasswordDialogVisible = true">
            B·∫≠t x√°c th·ª±c hai y·∫øu t·ªë
          </VBtn>
        </VCardText>
      </VCard>
    </VCol>
    <!-- !SECTION -->

    <VCol cols="12">
      <!-- SECTION: Create an API key -->
      <VCard title="T·∫°o API key">
        <VRow no-gutters>
          <!-- üëâ Choose API Key -->
          <VCol
            cols="12"
            md="5"
            order-md="0"
            order="1"
          >
            <VCardText class="pt-1">
              <VForm @submit.prevent="() => { }">
                <VRow>
                  <!-- üëâ Choose API Key -->
                  <VCol cols="12">
                    <AppSelect
                      label="Ch·ªçn lo·∫°i API key b·∫°n mu·ªën t·∫°o"
                      placeholder="Ch·ªçn lo·∫°i API key"
                      :items="['Full Control', 'Modify', 'Read & Execute', 'List Folder Contents', 'Read Only', 'Read & Write']"
                    />
                  </VCol>

                  <!-- üëâ Name the API Key -->
                  <VCol cols="12">
                    <AppTextField
                      label="ƒê·∫∑t t√™n cho API key"
                      placeholder="ƒê·∫∑t t√™n cho API key"
                    />
                  </VCol>

                  <!-- üëâ Create Key Button -->
                  <VCol cols="12">
                    <VBtn
                      type="submit"
                      block
                    >
                      T·∫°o key
                    </VBtn>
                  </VCol>
                </VRow>
              </VForm>
            </VCardText>
          </VCol>

          <!-- üëâ Lady image -->
          <VCol
            cols="12"
            md="7"
            order="0"
            order-md="1"
            class="d-flex flex-column justify-center align-center"
          >
            <VImg
              :src="laptopGirl"
              :width="$vuetify.display.smAndDown ? '150' : '200'"
              :style="$vuetify.display.smAndDown ? 'margin-block-end: 24px' : 'position: absolute; bottom: 0;'"
            />
          </VCol>
        </VRow>
      </VCard>
      <!-- !SECTION -->
    </VCol>

    <VCol cols="12">
      <!-- SECTION: API Keys List -->
      <VCard>
        <VCardItem class="pb-4">
          <VCardTitle>Danh s√°ch API Key & quy·ªÅn truy c·∫≠p</VCardTitle>
        </VCardItem>
        <VCardText>
          API key l√† m·ªôt chu·ªói ƒë∆∞·ª£c m√£ h√≥a ƒë∆°n gi·∫£n d√πng ƒë·ªÉ x√°c ƒë·ªãnh ·ª©ng d·ª•ng m√† kh√¥ng c·∫ßn b·∫•t k·ª≥ th√¥ng tin ƒë·ªãnh danh. Ch√∫ng h·ªØu √≠ch
          ƒë·ªÉ truy c·∫≠p d·ªØ li·ªáu c√¥ng khai ·∫©n danh, v√† ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ li√™n k·∫øt c√°c y√™u c·∫ßu API v·ªõi d·ª± √°n c·ªßa b·∫°n cho m·ª•c ƒë√≠ch h·∫°n m·ª©c v√†
          thanh to√°n.
        </VCardText>

        <!-- üëâ Server Status -->
        <VCardText class="d-flex flex-column gap-y-6">
          <VCard
            v-for="serverKey in serverKeys"
            :key="serverKey.key"
            flat
            class="pa-4"
            color="rgba(var(--v-theme-on-surface),var(--v-hover-opacity))"
          >
            <div class="d-flex flex-column gap-y-2">
              <div class="d-flex align-center flex-wrap">
                <h5 class="text-h5 me-3">
                  {{ serverKey.name }}
                </h5>
                <VChip
                  label
                  color="primary"
                  size="small"
                >
                  {{ serverKey.permission }}
                </VChip>
              </div>
              <div class="d-flex align-center text-base font-weight-medium">
                <h6 class="text-h6 text-medium-emphasis me-3">
                  {{ serverKey.key }}
                </h6>
                <div class="cursor-pointer">
                  <VIcon
                    icon="tabler-copy"
                    size="20"
                  />
                </div>
              </div>
              <div class="text-disabled">
                T·∫°o v√†o {{ serverKey.createdOn }}
              </div>
            </div>
          </VCard>
        </VCardText>
      </VCard>
      <!-- !SECTION -->
    </VCol>

    <!-- SECTION Recent Devices -->
    <VCol cols="12">
      <!-- üëâ Table -->
      <VCard title="Thi·∫øt b·ªã g·∫ßn ƒë√¢y">
        <VDivider />

        <VDataTable
          :headers="recentDevicesHeaders"
          :items="recentDevices"
          hide-default-footer
          class="text-no-wrap"
        >
          <template #item.browser="{ item }">
            <div class="d-flex">
              <VIcon
                start
                size="22"
                :icon="item.deviceIcon.icon"
                :color="item.deviceIcon.color"
              />
              <div class="text-high-emphasis text-body-1 font-weight-medium">
                {{ item.browser }}
              </div>
            </div>
          </template>
          <!-- TODO Refactor this after vuetify provides proper solution for removing default footer -->
          <template #bottom />
        </VDataTable>
      </VCard>
    </VCol>
    <!-- !SECTION -->
  </VRow>

  <!-- SECTION Enable One time password -->
  <TwoFactorAuthDialog v-model:is-dialog-visible="isOneTimePasswordDialogVisible" />
  <!-- !SECTION -->
</template>

<style lang="scss" scoped>
.card-list {
  --v-card-list-gap: 16px;
}

.server-close-btn {
  inset-inline-end: 0.5rem;
}
</style>
